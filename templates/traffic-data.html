<!DOCTYPE html>
<html>
<head>
   <title>Traffic Data</title>
</head>
<body>
   <h1>Traffic Data Viewer</h1>

   <h3>Filter by Type of Collision:</h3>
   <form method="get" action="/traffic-data">
       <select name="type_of_collision">
           <option value="all" {% if selected_collision_type == 'all' %}selected{% endif %}>All Types</option>
           {% for collision_type in collision_types %}
               <option value="{{ collision_type }}" {% if collision_type == selected_collision_type %}selected{% endif %}>
                   {{ collision_type }}
               </option>
           {% endfor %}
       </select>
       <button type="submit">Filter</button>
   </form>

   <h3>Data Table</h3>
   {% if traffic_records %}
       <table border="1" cellpadding="5" cellspacing="0">
           <tr>
               <th>Timestamp</th>
               <th>Route</th>
               <th>Type of Collision</th>
               <th>Description</th>
           </tr>
           {% for record in traffic_records %}
               <tr>
                   <td>{{ record['Timestamp'] }}</td>
                   <td>{{ record['Route'] }}</td>
                   <td>{{ record['TypeOfCollision'] }}</td>
                   <td>{{ record['Description'] }}</td>
               </tr>
           {% endfor %}
       </table>
   {% else %}
       <p>No traffic data available for the selected type of collision.</p>
   {% endif %}
</body>
</html>